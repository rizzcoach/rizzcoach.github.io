<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rizz Coach AI</title>
  <style>
    body {
      margin: 0;
      background: linear-gradient(135deg, #1e1e2f, #2c2c54);
      font-family: "Poppins", sans-serif;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100vh;
    }

    h1 {
      margin: 20px 0;
      color: #ff79c6;
      font-size: 2em;
      text-shadow: 0 0 8px #ff79c6;
    }

    #chat-container {
      flex: 1;
      width: 90%;
      max-width: 600px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      padding: 20px;
      overflow-y: auto;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    }

    .message {
      max-width: 75%;
      margin: 10px 0;
      padding: 12px 15px;
      border-radius: 18px;
      line-height: 1.4;
      animation: fadeIn 0.3s ease;
    }

    .user {
      background: #50fa7b;
      color: #000;
      align-self: flex-end;
      border-bottom-right-radius: 4px;
      margin-left: auto;
    }

    .ai {
      background: #8be9fd;
      color: #000;
      align-self: flex-start;
      border-bottom-left-radius: 4px;
      margin-right: auto;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    #input-area {
      display: flex;
      justify-content: center;
      width: 90%;
      max-width: 600px;
      margin: 15px 0 25px 0;
    }

    input {
      flex: 1;
      padding: 12px 15px;
      border: none;
      border-radius: 25px;
      outline: none;
      font-size: 1em;
    }

    button {
      background: #ff79c6;
      border: none;
      border-radius: 25px;
      color: white;
      padding: 12px 20px;
      margin-left: 10px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.2s;
    }

    button:hover {
      background: #ff92d0;
      transform: scale(1.05);
    }

    footer {
      font-size: 0.8em;
      color: #bbb;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h1>💬 Rizz Coach AI</h1>
  <div id="chat-container"></div>
  <div id="input-area">
    <input id="userInput" type="text" placeholder="Type your message..." />
    <button onclick="sendMessage()">Send</button>
  </div>
  <footer>✨ Let’s make your messages smooth, respectful & confident ✨</footer>

  <script>
    const API_KEY = "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";
    const API_URL = "https://api.deepseek.com/chat/completions";

    const chatContainer = document.getElementById("chat-container");
    const userInput = document.getElementById("userInput");

    async function sendMessage() {
      const message = userInput.value.trim();
      if (!message) return;

      addMessage("user", message);
      userInput.value = "";

      // show typing
      const typingElement = addMessage("ai", "💭 typing...");

      const payload = {
        model: "deepseek-chat",  // this is DeepSeek’s chat mode (non-thinking) :contentReference[oaicite:1]{index=1}
        messages: [
          {
            role: "system",
            content:
              "You are Rizz Coach AI — a confident, funny, respectful dating coach. Give flirty but classy, genuine advice. Never crude or disrespectful."
          },
          {
            role: "user",
            content: message
          }
        ]
      };

      try {
        const response = await fetch(API_URL, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${API_KEY}`
          },
          body: JSON.stringify(payload)
        });

        const data = await response.json();
        // DeepSeek’s API returns similar structure: choices[].message.content
        const reply = data.choices?.[0]?.message?.content ?? "Oops, something went wrong.";

        // replace the “typing” bubble
        typingElement.remove();
        addMessage("ai", reply);
      } catch (err) {
        typingElement.remove();
        addMessage("ai", `❌ Error: ${err.message}`);
      }
    }

    function addMessage(sender, text) {
      const msg = document.createElement("div");
      msg.classList.add("message", sender);
      msg.textContent = text;
      chatContainer.appendChild(msg);
      chatContainer.scrollTop = chatContainer.scrollHeight;
      return msg;
    }

    userInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        sendMessage();
      }
    });
  </script>
</body>
</html>
